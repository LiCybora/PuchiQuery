(t=>{let i=3;try{var s=t.fn.dropdown.Constructor.VERSION;void 0!==s&&(i=parseInt(s,10))}catch(t){}const e={3:{iconsPrefix:"glyphicon",icons:{paginationSwitchDown:"glyphicon-collapse-down icon-chevron-down",paginationSwitchUp:"glyphicon-collapse-up icon-chevron-up",refresh:"glyphicon-refresh icon-refresh",toggleOff:"glyphicon-list-alt icon-list-alt",toggleOn:"glyphicon-list-alt icon-list-alt",columns:"glyphicon-th icon-th",detailOpen:"glyphicon-plus icon-plus",detailClose:"glyphicon-minus icon-minus",fullscreen:"glyphicon-fullscreen"},classes:{buttons:"default",pull:"pull"},html:{toobarDropdow:['<ul class="dropdown-menu" role="menu">',"</ul>"],toobarDropdowItem:'<li role="menuitem"><label>%s</label></li>',pageDropdown:['<ul class="dropdown-menu" role="menu">',"</ul>"],pageDropdownItem:'<li role="menuitem" class="%s"><a href="#">%s</a></li>'}},4:{iconsPrefix:"fa",icons:{paginationSwitchDown:"fa-toggle-down",paginationSwitchUp:"fa-toggle-up",refresh:"fa-refresh",toggleOff:"fa-toggle-off",toggleOn:"fa-toggle-on",columns:"fa-th-list",detailOpen:"fa-plus",detailClose:"fa-minus",fullscreen:"fa-arrows-alt"},classes:{buttons:"secondary",pull:"float"},html:{toobarDropdow:['<div class="dropdown-menu dropdown-menu-right">',"</div>"],toobarDropdowItem:'<label class="dropdown-item">%s</label>',pageDropdown:['<div class="dropdown-menu">',"</div>"],pageDropdownItem:'<a class="dropdown-item %s" href="#">%s</a>'}}}[i],o={bootstrapVersion:i,sprintf(t,...i){let s=!0,e=0;return t=t.replace(/%s/g,()=>{const t=i[e++];return void 0===t?(s=!1,""):t}),s?t:""},getFieldTitle(t,i){for(let s of t)if(s.field===i)return s.title;return""},setFieldIndex(t){let i=0;const s=[];for(const s of t[0])i+=s.colspan||1;for(let e=0;e<t.length;e++){s[e]=[];for(let t=0;t<i;t++)s[e][t]=!1}for(let i=0;i<t.length;i++)for(let e=0;e<t[i].length;e++){const o=t[i][e],n=o.rowspan||1,a=o.colspan||1,l=s[i].indexOf(!1);1===a&&(o.fieldIndex=l,void 0===o.field&&(o.field=l));for(let t=0;t<n;t++)s[i+t][l]=!0;for(let t=0;t<a;t++)s[i][l+t]=!0}},getScrollBarWidth(){if(null===this.cachedWidth){const i=t("<div/>").addClass("fixed-table-scroll-inner"),s=t("<div/>").addClass("fixed-table-scroll-outer");let e,o;s.append(i),t("body").append(s),e=i[0].offsetWidth,s.css("overflow","scroll"),e===(o=i[0].offsetWidth)&&(o=s[0].clientWidth),s.remove(),this.cachedWidth=e-o}return this.cachedWidth},calculateObjectValue(t,i,s,e){let o=i;if("string"==typeof i){const t=i.split(".");if(t.length>1){o=window;for(const i of t)o=o[i]}else o=window[i]}return null!==o&&"object"==typeof o?o:"function"==typeof o?o.apply(t,s||[]):!o&&"string"==typeof i&&this.sprintf(i,...s)?this.sprintf(i,...s):e},compareObjects(t,i,s){const e=Object.keys(t),o=Object.keys(i);if(s&&e.length!==o.length)return!1;for(const s of e)if(o.includes(s)&&t[s]!==i[s])return!1;return!0},escapeHTML:t=>"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#x60;"):t,getRealDataAttr(t){for(const i in t){const s=i.split(/(?=[A-Z])/).join("-").toLowerCase();s!==i&&(t[s]=t[i],delete t[i])}return t},getItemField(t,i,s){let e=t;if("string"!=typeof i||t.hasOwnProperty(i))return s?this.escapeHTML(t[i]):t[i];const o=i.split(".");for(const t of o)e=e&&e[t];return s?this.escapeHTML(e):e},isIEBrowser:()=>navigator.userAgent.includes("MSIE ")||/Trident.*rv:11\./.test(navigator.userAgent)},n={classes:"table table-hover",locale:void 0,height:void 0,undefinedText:"-",sortName:void 0,sortOrder:"asc",sortStable:!1,sortClass:void 0,rememberOrder:!1,striped:!1,columns:[[]],data:[],totalField:"total",dataField:"rows",method:"get",url:void 0,ajax:void 0,cache:!0,contentType:"application/json",dataType:"json",ajaxOptions:{},queryParams:t=>t,queryParamsType:"limit",responseHandler:t=>t,pagination:!1,onlyInfoPagination:!1,paginationLoop:!0,sidePagination:"client",totalRows:0,pageNumber:1,pageSize:10,pageList:[10,25,50,100],paginationHAlign:"right",paginationVAlign:"bottom",paginationDetailHAlign:"left",paginationPreText:"&lsaquo;",paginationNextText:"&rsaquo;",search:!1,searchOnEnterKey:!1,strictSearch:!1,searchAlign:"right",selectItemName:"btSelectItem",showHeader:!0,showFooter:!1,showColumns:!1,showPaginationSwitch:!1,showRefresh:!1,showToggle:!1,showFullscreen:!1,smartDisplay:!0,escape:!1,minimumCountColumns:1,idField:void 0,uniqueId:void 0,cardView:!1,detailView:!1,detailFormatter:(t,i)=>"",detailFilter:(t,i)=>!0,trimOnSearch:!0,clickToSelect:!1,singleSelect:!1,toolbar:void 0,toolbarAlign:"left",buttonsToolbar:void 0,buttonsAlign:"right",checkboxHeader:!0,sortable:!0,silentSort:!0,maintainSelected:!1,searchTimeOut:500,searchText:"",iconSize:void 0,buttonsClass:e.classes.buttons,iconsPrefix:e.iconsPrefix,icons:e.icons,customSearch:t.noop,customSort:t.noop,ignoreClickToSelectOn:t=>["A","BUTTON"].includes(t.tagName),rowStyle:(t,i)=>({}),rowAttributes:(t,i)=>({}),footerStyle:(t,i)=>({}),onAll:(t,i)=>!1,onClickCell:(t,i,s,e)=>!1,onDblClickCell:(t,i,s,e)=>!1,onClickRow:(t,i)=>!1,onDblClickRow:(t,i)=>!1,onSort:(t,i)=>!1,onCheck:t=>!1,onUncheck:t=>!1,onCheckAll:t=>!1,onUncheckAll:t=>!1,onCheckSome:t=>!1,onUncheckSome:t=>!1,onLoadSuccess:t=>!1,onLoadError:t=>!1,onColumnSwitch:(t,i)=>!1,onPageChange:(t,i)=>!1,onSearch:t=>!1,onToggle:t=>!1,onPreBody:t=>!1,onPostBody:()=>!1,onPostHeader:()=>!1,onExpandRow:(t,i,s)=>!1,onCollapseRow:(t,i)=>!1,onRefreshOptions:t=>!1,onRefresh:t=>!1,onResetView:()=>!1,onScrollBody:()=>!1},a={};a["en-US"]=a.en={formatLoadingMessage:()=>"Loading, please wait...",formatRecordsPerPage:t=>o.sprintf("%s rows per page",t),formatShowingRows:(t,i,s)=>o.sprintf("Showing %s to %s of %s rows",t,i,s),formatDetailPagination:t=>o.sprintf("Showing %s rows",t),formatSearch:()=>"Search",formatNoMatches:()=>"No matching records found",formatPaginationSwitch:()=>"Hide/Show pagination",formatRefresh:()=>"Refresh",formatToggle:()=>"Toggle",formatFullscreen:()=>"Fullscreen",formatColumns:()=>"Columns",formatAllRows:()=>"All"},t.extend(n,a["en-US"]);const l={radio:!1,checkbox:!1,checkboxEnabled:!0,field:void 0,title:void 0,titleTooltip:void 0,class:void 0,align:void 0,halign:void 0,falign:void 0,valign:void 0,width:void 0,sortable:!1,order:"asc",visible:!0,switchable:!0,clickToSelect:!0,formatter:void 0,footerFormatter:void 0,events:void 0,sorter:void 0,sortName:void 0,cellStyle:void 0,searchable:!0,searchFormatter:!0,cardVisible:!0,escape:!1,showSelectTitle:!1,filterFormatter:void 0,sortFormatter:void 0,dependency:void 0};class r{constructor(i,s){this.options=s,this.$el=t(i),this.$el_=this.$el.clone(),this.timeoutId_=0,this.timeoutFooter_=0,this.init()}init(){this.initLocale(),this.initContainer(),this.initTable(),this.initHeader(),this.initData(),this.initHiddenRows(),this.initFooter(),this.initToolbar(),this.initPagination(),this.initBody(),this.initSearchText(),this.initServer()}initLocale(){if(this.options.locale){const i=t.fn.bootstrapTable.locales,s=this.options.locale.split(/-|_/);s[0].toLowerCase(),s[1]&&s[1].toUpperCase(),i[this.options.locale]?t.extend(this.options,i[this.options.locale]):t.fn.bootstrapTable.locales[s.join("-")]?t.extend(this.options,i[s.join("-")]):t.fn.bootstrapTable.locales[s[0]]&&t.extend(this.options,i[s[0]])}}initContainer(){const i=["top","both"].includes(this.options.paginationVAlign)?'<div class="fixed-table-pagination clearfix"></div>':"",s=["bottom","both"].includes(this.options.paginationVAlign)?'<div class="fixed-table-pagination"></div>':"";this.$container=t(`\n        <div class="bootstrap-table">\n        <div class="fixed-table-toolbar"></div>\n        ${i}\n        <div class="fixed-table-container">\n        <div class="fixed-table-header"><table></table></div>\n        <div class="fixed-table-body">\n        <div class="fixed-table-loading">\n        ${this.options.formatLoadingMessage()}\n        </div>\n        </div>\n        <div class="fixed-table-footer"><table><tr></tr></table></div>\n        </div>\n        ${s}\n        </div>\n      `),this.$container.insertAfter(this.$el),this.$tableContainer=this.$container.find(".fixed-table-container"),this.$tableHeader=this.$container.find(".fixed-table-header"),this.$tableBody=this.$container.find(".fixed-table-body"),this.$tableLoading=this.$container.find(".fixed-table-loading"),this.$tableFooter=this.$container.find(".fixed-table-footer"),this.options.buttonsToolbar?this.$toolbar=t("body").find(this.options.buttonsToolbar):this.$toolbar=this.$container.find(".fixed-table-toolbar"),this.$pagination=this.$container.find(".fixed-table-pagination"),this.$tableBody.append(this.$el),this.$container.after('<div class="clearfix"></div>'),this.$el.addClass(this.options.classes),this.options.striped&&this.$el.addClass("table-striped"),this.options.classes.split(" ").includes("table-no-bordered")&&this.$tableContainer.addClass("table-no-bordered")}initTable(){const i=[],s=[];if(this.$header=this.$el.find(">thead"),this.$header.length||(this.$header=t("<thead></thead>").appendTo(this.$el)),this.$header.find("tr").each((s,e)=>{const o=[];t(e).find("th").each((i,s)=>{void 0!==t(s).data("field")&&t(s).data("field",`${t(s).data("field")}`),o.push(t.extend({},{title:t(s).html(),class:t(s).attr("class"),titleTooltip:t(s).attr("title"),rowspan:t(s).attr("rowspan")?+t(s).attr("rowspan"):void 0,colspan:t(s).attr("colspan")?+t(s).attr("colspan"):void 0},t(s).data()))}),i.push(o)}),Array.isArray(this.options.columns[0])||(this.options.columns=[this.options.columns]),this.options.columns=t.extend(!0,[],i,this.options.columns),this.columns=[],this.fieldsColumnsIndex=[],o.setFieldIndex(this.options.columns),this.options.columns.forEach((i,s)=>{i.forEach((i,e)=>{void 0!==(i=t.extend({},r.COLUMN_DEFAULTS,i)).fieldIndex&&(this.columns[i.fieldIndex]=i,this.fieldsColumnsIndex[i.field]=i.fieldIndex),this.options.columns[s][e]=i})}),this.options.data.length)return;const e=[];this.$el.find(">tbody>tr").each((i,n)=>{const a={};a._id=t(n).attr("id"),a._class=t(n).attr("class"),a._data=o.getRealDataAttr(t(n).data()),t(n).find(">td").each((s,n)=>{const l=+t(n).attr("colspan")||1,r=+t(n).attr("rowspan")||1;for(;e[i]&&e[i][s];s++);for(let t=s;t<s+l;t++)for(let s=i;s<i+r;s++)e[s]||(e[s]=[]),e[s][t]=!0;const h=this.columns[s].field;a[h]=t(n).html(),a[`_${h}_id`]=t(n).attr("id"),a[`_${h}_class`]=t(n).attr("class"),a[`_${h}_rowspan`]=t(n).attr("rowspan"),a[`_${h}_colspan`]=t(n).attr("colspan"),a[`_${h}_title`]=t(n).attr("title"),a[`_${h}_data`]=o.getRealDataAttr(t(n).data())}),s.push(a)}),this.options.data=s,s.length&&(this.fromHtml=!0)}initHeader(){const i={},s=[];this.header={fields:[],styles:[],classes:[],formatters:[],events:[],sorters:[],sortNames:[],cellStyles:[],searchables:[],filterFormatters:[],dependencies:[],sortFormatters:[]},this.options.columns.forEach((t,e)=>{s.push("<tr>"),0===e&&!this.options.cardView&&this.options.detailView&&s.push(`<th class="detail" rowspan="${this.options.columns.length}">\n            <div class="fht-cell"></div>\n            </th>\n          `),t.forEach((t,n)=>{let a="",l="",r="",h="";const d=o.sprintf(' class="%s"',t.class);let p="px",c=t.width;if(void 0===t.width||this.options.cardView||"string"==typeof t.width&&t.width.includes("%")&&(p="%"),t.width&&"string"==typeof t.width&&(c=t.width.replace("%","").replace("px","")),l=o.sprintf("text-align: %s; ",t.halign?t.halign:t.align),r=o.sprintf("text-align: %s; ",t.align),h=o.sprintf("vertical-align: %s; ",t.valign),h+=o.sprintf("width: %s; ",!t.checkbox&&!t.radio||c?c?c+p:void 0:t.showSelectTitle?void 0:"36px"),void 0!==t.fieldIndex){if(this.header.fields[t.fieldIndex]=t.field,this.header.styles[t.fieldIndex]=r+h,this.header.classes[t.fieldIndex]=d,this.header.formatters[t.fieldIndex]=t.formatter,this.header.filterFormatters[t.fieldIndex]=t.filterFormatter,this.header.sortFormatters[t.fieldIndex]=t.sortFormatter,this.header.dependencies[t.fieldIndex]=t.dependency,this.header.events[t.fieldIndex]=t.events,this.header.sorters[t.fieldIndex]=t.sorter,this.header.sortNames[t.fieldIndex]=t.sortName,this.header.cellStyles[t.fieldIndex]=t.cellStyle,this.header.searchables[t.fieldIndex]=t.searchable,!t.visible)return;if(this.options.cardView&&!t.cardVisible)return;i[t.field]=t}s.push(`<th${o.sprintf(' title="%s"',t.titleTooltip)}`,t.checkbox||t.radio?o.sprintf(' class="bs-checkbox %s"',t.class||""):d,o.sprintf(' style="%s"',l+h),o.sprintf(' rowspan="%s"',t.rowspan),o.sprintf(' colspan="%s"',t.colspan),o.sprintf(' data-field="%s"',t.field),0===n&&e>0?" data-not-first-th":"",">"),s.push(o.sprintf('<div class="th-inner %s">',this.options.sortable&&t.sortable?"sortable both":""));const f=a=this.options.escape?o.escapeHTML(t.title):t.title;t.checkbox&&(a="",!this.options.singleSelect&&this.options.checkboxHeader&&(a='<input name="btSelectAll" type="checkbox" />'),this.header.stateField=t.field),t.radio&&(a="",this.header.stateField=t.field,this.options.singleSelect=!0),!a&&t.showSelectTitle&&(a+=f),s.push(a),s.push("</div>"),s.push('<div class="fht-cell"></div>'),s.push("</div>"),s.push("</th>")}),s.push("</tr>")}),this.$header.html(s.join("")),this.$header.find("th[data-field]").each((s,e)=>{t(e).data(i[t(e).data("field")])}),this.$container.off("click",".th-inner").on("click",".th-inner",i=>{const s=t(i.currentTarget);if(this.options.detailView&&!s.parent().hasClass("bs-checkbox")&&s.closest(".bootstrap-table")[0]!==this.$container[0])return!1;this.options.sortable&&s.parent().data().sortable&&this.onSort(i)}),this.$header.children().children().off("keypress").on("keypress",i=>{if(this.options.sortable&&t(i.currentTarget).data().sortable){13===(i.keyCode||i.which)&&this.onSort(i)}}),t(window).off("resize.bootstrap-table"),!this.options.showHeader||this.options.cardView?(this.$header.hide(),this.$tableHeader.hide(),this.$tableLoading.css("top",0)):(this.$header.show(),this.$tableHeader.show(),this.$tableLoading.css("top",this.$header.outerHeight()+1),this.getCaret(),t(window).on("resize.bootstrap-table",t.proxy(this.resetWidth,this))),this.$selectAll=this.$header.find('[name="btSelectAll"]'),this.$selectAll.off("click").on("click",i=>{this[t(i.currentTarget).prop("checked")?"checkAll":"uncheckAll"](),this.updateSelected()})}initFooter(){!this.options.showFooter||this.options.cardView?this.$tableFooter.hide():this.$tableFooter.show()}initData(t,i){this.options.data="append"===i?this.options.data.concat(t):"prepend"===i?[].concat(t).concat(this.options.data):t||this.options.data,this.data=this.options.data,"server"!==this.options.sidePagination&&this.initSort()}initSort(){let i=this.options.sortName;const s="desc"===this.options.sortOrder?-1:1,e=this.header.fields.indexOf(this.options.sortName);let n=0;this.options.customSort===t.noop?-1!==e&&(this.options.sortStable&&this.data.forEach((t,i)=>{t._position=i}),this.data.sort((n,a)=>{this.header.sortNames[e]&&(i=this.header.sortNames[e]);let l=o.getItemField(n,i,this.options.escape),r=o.getItemField(a,i,this.options.escape);void 0!==this.header.dependencies[e]&&(l=this.header.dependencies[e](l,n),r=this.header.dependencies[e](r,a)),void 0!==this.header.sortFormatters[e]&&(l=this.header.sortFormatters[e](l,n),r=this.header.sortFormatters[e](r,a));const h=o.calculateObjectValue(this.header,this.header.sorters[e],[l,r,n,a]);return void 0!==h?this.options.sortStable&&0===h?n._position-a._position:s*h:(null==l&&(l=""),null==r&&(r=""),this.options.sortStable&&l===r?(l=n._position,r=a._position,n._position-a._position):t.isNumeric(l)&&t.isNumeric(r)?(l=parseFloat(l))<(r=parseFloat(r))?-1*s:s:l===r?0:("string"!=typeof l&&(l=l.toString()),-1===l.localeCompare(r)?-1*s:s))}),void 0!==this.options.sortClass&&(clearTimeout(n),n=setTimeout(()=>{this.$el.removeClass(this.options.sortClass);const t=this.$header.find(o.sprintf('[data-field="%s"]',this.options.sortName).index()+1);this.$el.find(o.sprintf("tr td:nth-child(%s)",t)).addClass(this.options.sortClass)},250))):this.options.customSort.apply(this,[this.options.sortName,this.options.sortOrder])}onSort({type:i,currentTarget:s}){const e="keypress"===i?t(s):t(s).parent(),o=this.$header.find("th").eq(e.index());this.$header.add(this.$header_).find("span.order").remove(),this.options.sortName===e.data("field")?this.options.sortOrder="asc"===this.options.sortOrder?"desc":"asc":(this.options.sortName=e.data("field"),this.options.rememberOrder?this.options.sortOrder="asc"===e.data("order")?"desc":"asc":this.options.sortOrder=this.columns[this.fieldsColumnsIndex[e.data("field")]].order),this.trigger("sort",this.options.sortName,this.options.sortOrder),e.add(o).data("order",this.options.sortOrder),this.getCaret(),"server"!==this.options.sidePagination?(this.initSort(),this.initBody()):this.initServer(this.options.silentSort)}initToolbar(){let i,s,n=[],a=0,l=0;this.$toolbar.find(".bs-bars").children().length&&t("body").append(t(this.options.toolbar)),this.$toolbar.html(""),"string"!=typeof this.options.toolbar&&"object"!=typeof this.options.toolbar||t(o.sprintf('<div class="bs-bars %s-%s"></div>',e.classes.pull,this.options.toolbarAlign)).appendTo(this.$toolbar).append(t(this.options.toolbar)),n=[o.sprintf('<div class="columns columns-%s btn-group %s-%s">',this.options.buttonsAlign,e.classes.pull,this.options.buttonsAlign)],"string"==typeof this.options.icons&&(this.options.icons=o.calculateObjectValue(null,this.options.icons)),this.options.showPaginationSwitch&&n.push(o.sprintf(`<button class="btn${o.sprintf(" btn-%s",this.options.buttonsClass)}${o.sprintf(" btn-%s",this.options.iconSize)}" type="button" name="paginationSwitch" aria-label="pagination Switch" title="%s">`,this.options.formatPaginationSwitch()),o.sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.paginationSwitchDown),"</button>"),this.options.showFullscreen&&this.$toolbar.find('button[name="fullscreen"]').off("click").on("click",t.proxy(this.toggleFullscreen,this)),this.options.showRefresh&&n.push(o.sprintf(`<button class="btn${o.sprintf(" btn-%s",this.options.buttonsClass)}${o.sprintf(" btn-%s",this.options.iconSize)}" type="button" name="refresh" aria-label="refresh" title="%s">`,this.options.formatRefresh()),o.sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.refresh),"</button>"),this.options.showToggle&&n.push(o.sprintf(`<button class="btn${o.sprintf(" btn-%s",this.options.buttonsClass)}${o.sprintf(" btn-%s",this.options.iconSize)}" type="button" name="toggle" aria-label="toggle" title="%s">`,this.options.formatToggle()),o.sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.toggleOff),"</button>"),this.options.showFullscreen&&n.push(o.sprintf(`<button class="btn${o.sprintf(" btn-%s",this.options.buttonsClass)}${o.sprintf(" btn-%s",this.options.iconSize)}" type="button" name="fullscreen" aria-label="fullscreen" title="%s">`,this.options.formatFullscreen()),o.sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.fullscreen),"</button>"),this.options.showColumns&&(n.push(o.sprintf('<div class="keep-open btn-group" title="%s">',this.options.formatColumns()),`<button type="button" aria-label="columns" class="btn${o.sprintf(" btn-%s",this.options.buttonsClass)}${o.sprintf(" btn-%s",this.options.iconSize)} dropdown-toggle" data-toggle="dropdown">`,o.sprintf('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.columns),' <span class="caret"></span>',"</button>",e.html.toobarDropdow[0]),this.columns.forEach((t,i)=>{if(t.radio||t.checkbox)return;if(this.options.cardView&&!t.cardVisible)return;const s=t.visible?' checked="checked"':"";t.switchable&&(n.push(o.sprintf(e.html.toobarDropdowItem,o.sprintf('<input type="checkbox" data-field="%s" value="%s"%s> %s',t.field,i,s,t.title))),l++)}),n.push(e.html.toobarDropdow[1],"</div>")),n.push("</div>"),(this.showToolbar||n.length>2)&&this.$toolbar.append(n.join("")),this.options.showPaginationSwitch&&this.$toolbar.find('button[name="paginationSwitch"]').off("click").on("click",t.proxy(this.togglePagination,this)),this.options.showRefresh&&this.$toolbar.find('button[name="refresh"]').off("click").on("click",t.proxy(this.refresh,this)),this.options.showToggle&&this.$toolbar.find('button[name="toggle"]').off("click").on("click",()=>{this.toggleView()}),this.options.showColumns&&(i=this.$toolbar.find(".keep-open"),l<=this.options.minimumCountColumns&&i.find("input").prop("disabled",!0),i.find("li").off("click").on("click",t=>{t.stopImmediatePropagation()}),i.find("input").off("click").on("click",i=>{const s=t(i.currentTarget);this.toggleColumn(s.val(),s.prop("checked"),!1),this.trigger("column-switch",s.data("field"),s.prop("checked"))})),this.options.search&&((n=[]).push(o.sprintf('<div class="%s-%s search">',e.classes.pull,this.options.searchAlign),o.sprintf(`<input class="form-control${o.sprintf(" input-%s",this.options.iconSize)}" type="text" placeholder="%s">`,this.options.formatSearch()),"</div>"),this.$toolbar.append(n.join("")),(s=this.$toolbar.find(".search input")).off("keyup drop blur").on("keyup drop blur",t=>{this.options.searchOnEnterKey&&13!==t.keyCode||[37,38,39,40].includes(t.keyCode)||(clearTimeout(a),a=setTimeout(()=>{this.onSearch(t)},this.options.searchTimeOut))}),o.isIEBrowser()&&s.off("mouseup").on("mouseup",t=>{clearTimeout(a),a=setTimeout(()=>{this.onSearch(t)},this.options.searchTimeOut)}))}onSearch({currentTarget:i,firedByInitSearchText:s}){const e=t.trim(t(i).val());this.options.trimOnSearch&&t(i).val()!==e&&t(i).val(e),e!==this.searchText&&(this.searchText=e,this.options.searchText=e,s||(this.options.pageNumber=1),this.initSearch(),s?"client"===this.options.sidePagination&&this.updatePagination():this.updatePagination(),this.trigger("search",e))}initSearch(){if("server"!==this.options.sidePagination){if(this.options.customSearch!==t.noop)return void("string"==typeof this.options.customSearch?window[this.options.customSearch].apply(this,[this.searchText]):this.options.customSearch.apply(this,[this.searchText]));const i=this.searchText&&(this.options.escape?o.escapeHTML(this.searchText):this.searchText).toLowerCase(),s=t.isEmptyObject(this.filterColumns)?null:this.filterColumns;this.data=s?this.options.data.filter((t,i)=>{for(const i in s){let e=this.header.fields.indexOf(i),o=t[i];void 0!==this.header.dependencies[e]&&(o=this.header.dependencies[e](t[i],t));let n=(t,i,s)=>Array.isArray(t)&&Array.isArray(s)&&0===[...new Set(s)].filter(i=>new Set(t).has(i)).length||!Array.isArray(t)&&(Array.isArray(s)&&!s.includes(t)||!Array.isArray(s)&&t!==s);if(void 0!==this.header.filterFormatters[e]&&(n=this.header.filterFormatters[e]),n(o,t,s[i]))return!1}return!0}):this.options.data,this.data=i?this.data.filter((s,e)=>{for(let n=0;n<this.header.fields.length;n++){if(!this.header.searchables[n])continue;const a=t.isNumeric(this.header.fields[n])?parseInt(this.header.fields[n],10):this.header.fields[n],l=this.columns[this.fieldsColumnsIndex[a]];let r;if("string"==typeof a){r=s;const t=a.split(".");for(let i=0;i<t.length;i++)null!=r[t[i]]&&(r=r[t[i]])}else r=s[a];if(l&&l.searchFormatter&&(r=o.calculateObjectValue(l,this.header.formatters[n],[r,s,e],r)),"string"==typeof r||"number"==typeof r)if(this.options.strictSearch){if(`${r}`.toLowerCase()===i)return!0}else if(`${r}`.toLowerCase().includes(i))return!0}return!1}):this.data}}initPagination(){if(!this.options.pagination)return void this.$pagination.hide();this.$pagination.show();const i=[];let s,n,a,l,r,h,d,p=!1;const c=this.getData();let f=this.options.pageList;if("server"!==this.options.sidePagination&&(this.options.totalRows=c.length),this.totalPages=0,this.options.totalRows){if(this.options.pageSize===this.options.formatAllRows())this.options.pageSize=this.options.totalRows,p=!0;else if(this.options.pageSize===this.options.totalRows){("string"==typeof this.options.pageList?this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.pageList).includes(this.options.formatAllRows().toLowerCase())&&(p=!0)}this.totalPages=1+~~((this.options.totalRows-1)/this.options.pageSize),this.options.totalPages=this.totalPages}if(this.totalPages>0&&this.options.pageNumber>this.totalPages&&(this.options.pageNumber=this.totalPages),this.pageFrom=(this.options.pageNumber-1)*this.options.pageSize+1,this.pageTo=this.options.pageNumber*this.options.pageSize,this.pageTo>this.options.totalRows&&(this.pageTo=this.options.totalRows),i.push(o.sprintf('<div class="%s-%s pagination-detail">',e.classes.pull,this.options.paginationDetailHAlign),'<span class="pagination-info">',this.options.onlyInfoPagination?this.options.formatDetailPagination(this.options.totalRows):this.options.formatShowingRows(this.pageFrom,this.pageTo,this.options.totalRows),"</span>"),!this.options.onlyInfoPagination){i.push('<span class="page-list">');const t=[o.sprintf('<span class="btn-group %s">',"top"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?"dropdown":"dropup"),`<button type="button" class="btn${o.sprintf(" btn-%s",this.options.buttonsClass)}${o.sprintf(" btn-%s",this.options.iconSize)} dropdown-toggle" data-toggle="dropdown">`,'<span class="page-size">',p?this.options.formatAllRows():this.options.pageSize,"</span>",' <span class="caret"></span>',"</button>",e.html.pageDropdown[0]];if("string"==typeof this.options.pageList){const t=this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").split(",");f=[];for(let i of t)f.push(i.toUpperCase()===this.options.formatAllRows().toUpperCase()||"UNLIMITED"===i.toUpperCase()?this.options.formatAllRows():+i)}for(f.forEach((i,s)=>{if(!this.options.smartDisplay||0===s||f[s-1]<this.options.totalRows){let s;s=p?i===this.options.formatAllRows()?"active":"":i===this.options.pageSize?"active":"",t.push(o.sprintf(e.html.pageDropdownItem,s,i))}}),t.push(`${e.html.pageDropdown[1]}</span>`),i.push(this.options.formatRecordsPerPage(t.join(""))),i.push("</span>"),i.push("</div>",o.sprintf('<div class="%s-%s pagination">',e.classes.pull,this.options.paginationHAlign),`<ul class="pagination${o.sprintf(" pagination-%s",this.options.iconSize)}">`,o.sprintf('<li class="page-item page-pre"><a class="page-link" href="#">%s</a></li>',this.options.paginationPreText)),this.totalPages<5?(n=1,a=this.totalPages):(a=(n=this.options.pageNumber-2)+4,n<1&&(n=1,a=5),a>this.totalPages&&(n=(a=this.totalPages)-4)),this.totalPages>=6&&(this.options.pageNumber>=3&&(i.push(o.sprintf('<li class="page-item page-first%s">',1===this.options.pageNumber?" active":""),'<a class="page-link" href="#">',1,"</a>","</li>"),n++),this.options.pageNumber>=4&&(4===this.options.pageNumber||6===this.totalPages||7===this.totalPages?n--:i.push('<li class="page-item page-first-separator disabled">','<a class="page-link" href="#">...</a>',"</li>"),a--)),this.totalPages>=7&&this.options.pageNumber>=this.totalPages-2&&n--,6===this.totalPages?this.options.pageNumber>=this.totalPages-2&&a++:this.totalPages>=7&&(7===this.totalPages||this.options.pageNumber>=this.totalPages-3)&&a++,s=n;s<=a;s++)i.push(o.sprintf('<li class="page-item%s">',s===this.options.pageNumber?" active":""),'<a class="page-link" href="#">',s,"</a>","</li>");this.totalPages>=8&&this.options.pageNumber<=this.totalPages-4&&i.push('<li class="page-item page-last-separator disabled">','<a class="page-link" href="#">...</a>',"</li>"),this.totalPages>=6&&this.options.pageNumber<=this.totalPages-3&&i.push(o.sprintf('<li class="page-item page-last%s">',this.totalPages===this.options.pageNumber?" active":""),'<a class="page-link" href="#">',this.totalPages,"</a>","</li>"),i.push(o.sprintf('<li class="page-item page-next"><a class="page-link" href="#">%s</a></li>',this.options.paginationNextText),"</ul>","</div>")}this.$pagination.html(i.join("")),this.options.onlyInfoPagination||(l=this.$pagination.find(".page-list a"),r=this.$pagination.find(".page-pre"),h=this.$pagination.find(".page-next"),d=this.$pagination.find(".page-item").not(".page-next, .page-pre"),this.options.smartDisplay&&(this.totalPages<=1&&this.$pagination.find("div.pagination").hide(),(f.length<2||this.options.totalRows<=f[0])&&this.$pagination.find("span.page-list").hide(),this.$pagination[this.getData().length?"show":"hide"]()),this.options.paginationLoop||(1===this.options.pageNumber&&r.addClass("disabled"),this.options.pageNumber===this.totalPages&&h.addClass("disabled")),p&&(this.options.pageSize=this.options.formatAllRows()),l.off("click").on("click",t.proxy(this.onPageListChange,this)),r.off("click").on("click",t.proxy(this.onPagePre,this)),h.off("click").on("click",t.proxy(this.onPageNext,this)),d.off("click").on("click",t.proxy(this.onPageNumber,this)))}updatePagination(i){i&&t(i.currentTarget).hasClass("disabled")||(this.options.maintainSelected||this.resetRows(),this.initPagination(),"server"===this.options.sidePagination?this.initServer():this.initBody(),this.trigger("page-change",this.options.pageNumber,this.options.pageSize))}onPageListChange(i){i.preventDefault();const s=t(i.currentTarget);return s.parent().addClass("active").siblings().removeClass("active"),this.options.pageSize=s.text().toUpperCase()===this.options.formatAllRows().toUpperCase()?this.options.formatAllRows():+s.text(),this.$toolbar.find(".page-size").text(this.options.pageSize),this.updatePagination(i),!1}onPagePre(t){return t.preventDefault(),this.options.pageNumber-1==0?this.options.pageNumber=this.options.totalPages:this.options.pageNumber--,this.updatePagination(t),!1}onPageNext(t){return t.preventDefault(),this.options.pageNumber+1>this.options.totalPages?this.options.pageNumber=1:this.options.pageNumber++,this.updatePagination(t),!1}onPageNumber(i){if(i.preventDefault(),this.options.pageNumber!==+t(i.currentTarget).text())return this.options.pageNumber=+t(i.currentTarget).text(),this.updatePagination(i),!1}initRow(i,s,e){let n;const a=[];let l={};const r=[];let h="",d={};const p=[];if(!this.hiddenRows.includes(i)){if((l=o.calculateObjectValue(this.options,this.options.rowStyle,[i,s],l))&&l.css)for(n in l.css)r.push(`${n}: ${l.css[n]}`);if(d=o.calculateObjectValue(this.options,this.options.rowAttributes,[i,s],d))for(n in d)p.push(`${n}="${o.escapeHTML(d[n])}"`);return i._data&&!t.isEmptyObject(i._data)&&i._data.forEach((t,i)=>{"index"!==i&&(h+=` data-${i}="${t}"`)}),a.push("<tr",o.sprintf(" %s",p.length?p.join(" "):void 0),o.sprintf(' id="%s"',Array.isArray(i)?void 0:i._id),o.sprintf(' class="%s"',l.classes||(Array.isArray(i)?void 0:i._class)),` data-index="${s}"`,o.sprintf(' data-uniqueid="%s"',i[this.options.uniqueId]),o.sprintf("%s",h),">"),this.options.cardView&&a.push(`<td colspan="${this.header.fields.length}"><div class="card-views">`),!this.options.cardView&&this.options.detailView&&(a.push("<td>"),o.calculateObjectValue(null,this.options.detailFilter,[s,i])&&a.push(`\n            <a class="detail-icon" href="#">\n            <i class="${this.options.iconsPrefix} ${this.options.icons.detailOpen}"></i>\n            </a>\n          `),a.push("</td>")),this.header.fields.forEach((e,n)=>{let h="",d=o.getItemField(i,e,this.options.escape),p="",c="",f={},g="",u=this.header.classes[n],b="",m="",w="",$="",y="";const v=this.columns[n];if((!this.fromHtml||void 0!==d||v.checkbox||v.radio)&&v.visible&&(!this.options.cardView||v.cardVisible)){if(v.escape&&(d=o.escapeHTML(d)),r.concat([this.header.styles[n]]).length&&(b=` style="${r.concat([this.header.styles[n]]).join("; ")}"`),i[`_${e}_id`]&&(g=o.sprintf(' id="%s"',i[`_${e}_id`])),i[`_${e}_class`]&&(u=o.sprintf(' class="%s"',i[`_${e}_class`])),i[`_${e}_rowspan`]&&(w=o.sprintf(' rowspan="%s"',i[`_${e}_rowspan`])),i[`_${e}_colspan`]&&($=o.sprintf(' colspan="%s"',i[`_${e}_colspan`])),i[`_${e}_title`]&&(y=o.sprintf(' title="%s"',i[`_${e}_title`])),(f=o.calculateObjectValue(this.header,this.header.cellStyles[n],[d,i,s,e],f)).classes&&(u=` class="${f.classes}"`),f.css){const t=[];for(const i in f.css)t.push(`${i}: ${f.css[i]}`);b=` style="${t.concat(this.header.styles[n]).join("; ")}"`}if(void 0!==this.header.dependencies[n]&&(d=this.header.dependencies[n](d,i)),p=o.calculateObjectValue(v,this.header.formatters[n],[d,i,s,e],d),i[`_${e}_data`]&&!t.isEmptyObject(i[`_${e}_data`])&&i[`_${e}_data`].forEach((t,i)=>{"index"!==i&&(m+=` data-${i}="${t}"`)}),v.checkbox||v.radio){c=v.checkbox?"checkbox":c,c=v.radio?"radio":c;const t=v.class||"",e=!0===p||d||p&&p.checked,a=!v.checkboxEnabled||p&&p.disabled;h=[this.options.cardView?`<div class="card-view ${t}">`:`<td class="bs-checkbox ${t}">`,`<input\n              data-index="${s}"\n              name="${this.options.selectItemName}"\n              type="${c}"\n              ${o.sprintf('value="%s"',i[this.options.idField])}\n              ${o.sprintf('checked="%s"',e?"checked":void 0)}\n              ${o.sprintf('disabled="%s"',a?"disabled":void 0)} />`,this.header.formatters[n]&&"string"==typeof p?p:"",this.options.cardView?"</div>":"</td>"].join(""),i[this.header.stateField]=!0===p||!!d||p&&p.checked}else if(p=null==p?this.options.undefinedText:p,this.options.cardView){h=`<div class="card-view">${this.options.showHeader?`<span class="title"${l}>${o.getFieldTitle(this.columns,e)}</span>`:""}<span class="value">${p}</span></div>`,this.options.smartDisplay&&""===p&&(h='<div class="card-view"></div>')}else h=`<td${g}${u}${b}${m}${w}${$}${y}>${p}</td>`;a.push(h)}}),this.options.cardView&&a.push("</div></td>"),a.push("</tr>"),a.join("")}}initBody(i){const s=this.getData();this.trigger("pre-body",s),this.$body=this.$el.find(">tbody"),this.$body.length||(this.$body=t("<tbody></tbody>").appendTo(this.$el)),this.options.pagination&&"server"!==this.options.sidePagination||(this.pageFrom=1,this.pageTo=s.length);const e=[];for(let t=this.pageFrom-1;t<this.pageTo;t++)e.push(this.initRow(s[t],t,s));e.length||this.$body.html(`<tr class="no-records-found">${o.sprintf('<td colspan="%s">%s</td>',this.$header.find("th").length,this.options.formatNoMatches())}</tr>`),this.$body.html(e.join("")),i||this.scrollTo(0),this.$body.find("> tr[data-index] > td").off("click dblclick").on("click dblclick",i=>{const s=t(i.currentTarget),e=s.parent(),n=this.data[e.data("index")],a=s[0].cellIndex,l=this.getVisibleFields()[this.options.detailView&&!this.options.cardView?a-1:a],r=this.columns[this.fieldsColumnsIndex[l]],h=o.getItemField(n,l,this.options.escape);if(!s.find(".detail-icon").length&&(this.trigger("click"===i.type?"click-cell":"dbl-click-cell",l,h,n,s),this.trigger("click"===i.type?"click-row":"dbl-click-row",n,e,l),"click"===i.type&&this.options.clickToSelect&&r.clickToSelect&&!this.options.ignoreClickToSelectOn(i.target))){const t=e.find(o.sprintf('[name="%s"]',this.options.selectItemName));t.length&&t[0].click()}}),this.$body.find("> tr[data-index] > td > .detail-icon").off("click").on("click",i=>{i.preventDefault();const e=t(i.currentTarget),n=e.parent().parent(),a=n.data("index"),l=s[a];if(n.next().is("tr.detail-view"))e.find("i").attr("class",o.sprintf("%s %s",this.options.iconsPrefix,this.options.icons.detailOpen)),this.trigger("collapse-row",a,l,n.next()),n.next().remove();else{e.find("i").attr("class",o.sprintf("%s %s",this.options.iconsPrefix,this.options.icons.detailClose)),n.after(o.sprintf('<tr class="detail-view"><td colspan="%s"></td></tr>',n.find("td").length));const t=n.next().find("td"),i=o.calculateObjectValue(this.options,this.options.detailFormatter,[a,l,t],"");1===t.length&&t.append(i),this.trigger("expand-row",a,l,t)}return this.resetView(),!1}),this.$selectItem=this.$body.find(o.sprintf('[name="%s"]',this.options.selectItemName)),this.$selectItem.off("click").on("click",i=>{i.stopImmediatePropagation();const s=t(i.currentTarget);this.check_(s.prop("checked"),s.data("index"))}),this.header.events.forEach((i,s)=>{if(!i)return;"string"==typeof i&&(i=o.calculateObjectValue(null,i));const e=this.header.fields[s];let n=this.getVisibleFields().indexOf(e);if(-1!==n){this.options.detailView&&!this.options.cardView&&(n+=1);for(const s in i)this.$body.find(">tr:not(.no-records-found)").each((o,a)=>{const l=t(a),r=l.find(this.options.cardView?".card-view":"td").eq(n),h=s.indexOf(" "),d=s.substring(0,h),p=s.substring(h+1),c=i[s];r.find(p).off(d).on(d,t=>{const i=l.data("index"),s=this.data[i],o=s[e];c.apply(this,[t,o,s,i])})})}}),this.updateSelected(),this.resetView(),this.trigger("post-body",s)}initServer(i,s,e){let n={};const a=this.header.fields.indexOf(this.options.sortName);let l,r={searchText:this.searchText,sortName:this.options.sortName,sortOrder:this.options.sortOrder};this.header.sortNames[a]&&(r.sortName=this.header.sortNames[a]),this.options.pagination&&"server"===this.options.sidePagination&&(r.pageSize=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize,r.pageNumber=this.options.pageNumber),(e||this.options.url||this.options.ajax)&&("limit"===this.options.queryParamsType&&(r={search:r.searchText,sort:r.sortName,order:r.sortOrder},this.options.pagination&&"server"===this.options.sidePagination&&(r.offset=this.options.pageSize===this.options.formatAllRows()?0:this.options.pageSize*(this.options.pageNumber-1),r.limit=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize,0===r.limit&&delete r.limit)),t.isEmptyObject(this.filterColumnsPartial)||(r.filter=JSON.stringify(this.filterColumnsPartial,null)),n=o.calculateObjectValue(this.options,this.options.queryParams,[r],n),t.extend(n,s||{}),!1!==n&&(i||this.$tableLoading.show(),l=t.extend({},o.calculateObjectValue(null,this.options.ajaxOptions),{type:this.options.method,url:e||this.options.url,data:"application/json"===this.options.contentType&&"post"===this.options.method?JSON.stringify(n):n,cache:this.options.cache,contentType:this.options.contentType,dataType:this.options.dataType,success:t=>{t=o.calculateObjectValue(this.options,this.options.responseHandler,[t],t),this.load(t),this.trigger("load-success",t),i||this.$tableLoading.hide()},error:t=>{let s=[];"server"===this.options.sidePagination&&((s={})[this.options.totalField]=0,s[this.options.dataField]=[]),this.load(s),this.trigger("load-error",t.status,t),i||this.$tableLoading.hide()}}),this.options.ajax?o.calculateObjectValue(this,this.options.ajax,[l],null):(this._xhr&&4!==this._xhr.readyState&&this._xhr.abort(),this._xhr=t.ajax(l))))}initSearchText(){if(this.options.search&&(this.searchText="",""!==this.options.searchText)){const t=this.$toolbar.find(".search input");t.val(this.options.searchText),this.onSearch({currentTarget:t,firedByInitSearchText:!0})}}getCaret(){this.$header.find("th").each((i,s)=>{t(s).find(".sortable").removeClass("desc asc").addClass(t(s).data("field")===this.options.sortName?this.options.sortOrder:"both")})}updateSelected(){const i=this.$selectItem.filter(":enabled").length&&this.$selectItem.filter(":enabled").length===this.$selectItem.filter(":enabled").filter(":checked").length;this.$selectAll.add(this.$selectAll_).prop("checked",i),this.$selectItem.each((i,s)=>{t(s).closest("tr")[t(s).prop("checked")?"addClass":"removeClass"]("selected")})}updateRows(){this.$selectItem.each((i,s)=>{this.data[t(s).data("index")][this.header.stateField]=t(s).prop("checked")})}resetRows(){for(let t of this.data)this.$selectAll.prop("checked",!1),this.$selectItem.prop("checked",!1),this.header.stateField&&(t[this.header.stateField]=!1);this.initHiddenRows()}trigger(i,...s){i+=".bs.table",this.options[r.EVENTS[i]].apply(this.options,s),this.$el.trigger(t.Event(i),s),this.options.onAll(i,s),this.$el.trigger(t.Event("all.bs.table"),[i,s])}resetHeader(){clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(t.proxy(this.fitHeader,this),this.$el.is(":hidden")?100:0)}fitHeader(){let i,s,e,n;if(this.$el.is(":hidden"))return void(this.timeoutId_=setTimeout(t.proxy(this.fitHeader,this),100));if(s=(i=this.$tableBody.get(0)).scrollWidth>i.clientWidth&&i.scrollHeight>i.clientHeight+this.$header.outerHeight()?o.getScrollBarWidth():0,this.$el.css("margin-top",-this.$header.outerHeight()),(e=t(":focus")).length>0){const t=e.parents("th");if(t.length>0){const i=t.attr("data-field");if(void 0!==i){const t=this.$header.find(`[data-field='${i}']`);t.length>0&&t.find(":input").addClass("focus-temp")}}}this.$header_=this.$header.clone(!0,!0),this.$selectAll_=this.$header_.find('[name="btSelectAll"]'),this.$tableHeader.css({"margin-right":s}).find("table").css("width",this.$el.outerWidth()).html("").attr("class",this.$el.attr("class")).append(this.$header_),(n=t(".focus-temp:visible:eq(0)")).length>0&&(n.focus(),this.$header.find(".focus-temp").removeClass("focus-temp")),this.$header.find("th[data-field]").each((i,s)=>{this.$header_.find(o.sprintf('th[data-field="%s"]',t(s).data("field"))).data(t(s).data())});const a=this.getVisibleFields(),l=this.$header_.find("th");this.$body.find(">tr:first-child:not(.no-records-found) > *").each((i,s)=>{const e=t(s);let n=i;if(this.options.detailView&&!this.options.cardView&&(0===i&&this.$header_.find("th.detail").find(".fht-cell").width(e.innerWidth()),n=i-1),-1===n)return;let r=this.$header_.find(o.sprintf('th[data-field="%s"]',a[n]));r.length>1&&(r=t(l[e[0].cellIndex]));const h=r.width()-r.find(".fht-cell").width();r.find(".fht-cell").width(e.innerWidth()-h)}),this.horizontalScroll(),this.trigger("post-header")}resetFooter(){const i=this.getData(),s=[];if(this.options.showFooter&&!this.options.cardView){!this.options.cardView&&this.options.detailView&&s.push('<td><div class="th-inner">&nbsp;</div><div class="fht-cell"></div></td>');for(let t of this.columns){let e,n="",a="";const l=[];let r={};const h=o.sprintf(' class="%s"',t.class);if(!t.visible)return;if(this.options.cardView&&!t.cardVisible)return;if(n=o.sprintf("text-align: %s; ",t.falign?t.falign:t.align),a=o.sprintf("vertical-align: %s; ",t.valign),(r=o.calculateObjectValue(null,this.options.footerStyle))&&r.css)for(e in r.css)l.push(`${e}: ${r.css[e]}`);s.push("<td",h,o.sprintf(' style="%s"',n+a+l.concat().join("; ")),">"),s.push('<div class="th-inner">'),s.push(o.calculateObjectValue(t,t.footerFormatter,[i],"&nbsp;")||"&nbsp;"),s.push("</div>"),s.push('<div class="fht-cell"></div>'),s.push("</div>"),s.push("</td>")}this.$tableFooter.find("tr").html(s.join("")),this.$tableFooter.show(),clearTimeout(this.timeoutFooter_),this.timeoutFooter_=setTimeout(t.proxy(this.fitFooter,this),this.$el.is(":hidden")?100:0)}}fitFooter(){let i,s,e;clearTimeout(this.timeoutFooter_),this.$el.is(":hidden")?this.timeoutFooter_=setTimeout(t.proxy(this.fitFooter,this),100):(e=(s=this.$el.css("width"))>this.$tableBody.width()?o.getScrollBarWidth():0,this.$tableFooter.css({"margin-right":e}).find("table").css("width",s).attr("class",this.$el.attr("class")),i=this.$tableFooter.find("td"),this.$body.find(">tr:first-child:not(.no-records-found) > *").each((s,e)=>{const o=t(e);i.eq(s).find(".fht-cell").width(o.innerWidth())}),this.horizontalScroll())}horizontalScroll(){this.trigger("scroll-body"),this.$tableBody.off("scroll").on("scroll",i=>{this.options.showHeader&&this.options.height&&this.$tableHeader.scrollLeft(t(i.currentTarget).scrollLeft()),this.options.showFooter&&!this.options.cardView&&this.$tableFooter.scrollLeft(t(i.currentTarget).scrollLeft())})}toggleColumn(t,i,s){if(-1!==t&&(this.columns[t].visible=i,this.initHeader(),this.initSearch(),this.initPagination(),this.initBody(),this.options.showColumns)){const e=this.$toolbar.find(".keep-open input").prop("disabled",!1);s&&e.filter(o.sprintf('[value="%s"]',t)).prop("checked",i),e.filter(":checked").length<=this.options.minimumCountColumns&&e.filter(":checked").prop("disabled",!0)}}getVisibleFields(){const t=[];for(let i of this.header.fields){this.columns[this.fieldsColumnsIndex[i]].visible&&t.push(i)}return t}resetView(t){let i=0;if(t&&t.height&&(this.options.height=t.height),this.$selectAll.prop("checked",this.$selectItem.length>0&&this.$selectItem.length===this.$selectItem.filter(":checked").length),this.options.height){const t=this.$toolbar.outerHeight(!0),i=this.$pagination.outerHeight(!0),s=this.options.height-t-i;this.$tableContainer.css("height",`${s}px`)}if(this.options.cardView)return this.$el.css("margin-top","0"),this.$tableContainer.css("padding-bottom","0"),void this.$tableFooter.hide();this.options.showHeader&&this.options.height?(this.$tableHeader.show(),this.resetHeader(),i+=this.$header.outerHeight()):(this.$tableHeader.hide(),this.trigger("post-header")),this.options.showFooter&&(this.resetFooter(),this.options.height&&(i+=this.$tableFooter.outerHeight()+1)),this.getCaret(),this.$tableContainer.css("padding-bottom",`${i}px`),this.trigger("reset-view")}getData(i){let s=this.options.data;return!this.searchText&&!this.options.sortName&&t.isEmptyObject(this.filterColumns)&&t.isEmptyObject(this.filterColumnsPartial)||(s=this.data),i?s.slice(this.pageFrom-1,this.pageTo):s}load(t){let i=!1;this.options.pagination&&"server"===this.options.sidePagination&&(this.options.totalRows=t[this.options.totalField]),i=t.fixedScroll,t=Array.isArray(t)?t:t[this.options.dataField],this.initData(t),this.initSearch(),this.initPagination(),this.initBody(i)}append(t){this.initData(t,"append"),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0)}prepend(t){this.initData(t,"prepend"),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0)}remove(t){const i=this.options.data.length;let s,e;if(t.hasOwnProperty("field")&&t.hasOwnProperty("values")){for(s=i-1;s>=0;s--)(e=this.options.data[s]).hasOwnProperty(t.field)&&t.values.includes(e[t.field])&&(this.options.data.splice(s,1),"server"===this.options.sidePagination&&(this.options.totalRows-=1));i!==this.options.data.length&&(this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0))}}removeAll(){this.options.data.length>0&&(this.options.data.splice(0,this.options.data.length),this.initSearch(),this.initPagination(),this.initBody(!0))}getRowByUniqueId(t){const i=this.options.uniqueId;let s,e,o,n=null;for(s=this.options.data.length-1;s>=0;s--){if((e=this.options.data[s]).hasOwnProperty(i))o=e[i];else{if(!e._data.hasOwnProperty(i))continue;o=e._data[i]}if("string"==typeof o?t=t.toString():"number"==typeof o&&(Number(o)===o&&o%1==0?t=parseInt(t):o===Number(o)&&0!==o&&(t=parseFloat(t))),o===t){n=e;break}}return n}removeByUniqueId(t){const i=this.options.data.length,s=this.getRowByUniqueId(t);s&&this.options.data.splice(this.options.data.indexOf(s),1),i!==this.options.data.length&&(this.initSearch(),this.initPagination(),this.initBody(!0))}updateByUniqueId(i){const s=Array.isArray(i)?i:[i];for(let i of s){let s;i.hasOwnProperty("id")&&i.hasOwnProperty("row")&&(-1!==(s=this.options.data.indexOf(this.getRowByUniqueId(i.id)))&&t.extend(this.options.data[s],i.row))}this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0)}refreshColumnTitle(i){if(i.hasOwnProperty("field")&&i.hasOwnProperty("title")&&(this.columns[this.fieldsColumnsIndex[i.field]].title=this.options.escape?o.escapeHTML(i.title):i.title,this.columns[this.fieldsColumnsIndex[i.field]].visible)){(void 0!==this.options.height?this.$tableHeader:this.$header).find("th[data-field]").each((s,e)=>{if(t(e).data("field")===i.field)return t(t(e).find(".th-inner")[0]).text(i.title),!1})}}insertRow(t){t.hasOwnProperty("index")&&t.hasOwnProperty("row")&&(this.options.data.splice(t.index,0,t.row),this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0))}updateRow(i){const s=Array.isArray(i)?i:[i];for(let i of s)i.hasOwnProperty("index")&&i.hasOwnProperty("row")&&t.extend(this.options.data[i.index],i.row);this.initSearch(),this.initPagination(),this.initSort(),this.initBody(!0)}initHiddenRows(){this.hiddenRows=[]}showRow(t){this.toggleRow(t,!0)}hideRow(t){this.toggleRow(t,!1)}toggleRow(t,i){let s,e;t.hasOwnProperty("index")?s=this.getData()[t.index]:t.hasOwnProperty("uniqueId")&&(s=this.getRowByUniqueId(t.uniqueId)),s&&(e=this.hiddenRows.indexOf(s),i||-1!==e?i&&e>-1&&this.hiddenRows.splice(e,1):this.hiddenRows.push(s),this.initBody(!0))}getHiddenRows(t){const i=this.getData(),s=[];for(let t of i)this.hiddenRows.includes(t)&&s.push(t);return this.hiddenRows=s,s}mergeCells(t){const i=t.index;let s=this.getVisibleFields().indexOf(t.field);const e=t.rowspan||1,o=t.colspan||1;let n,a;const l=this.$body.find(">tr");let r;if(this.options.detailView&&!this.options.cardView&&(s+=1),r=l.eq(i).find(">td").eq(s),!(i<0||s<0||i>=this.data.length)){for(n=i;n<i+e;n++)for(a=s;a<s+o;a++)l.eq(n).find(">td").eq(a).hide();r.attr("rowspan",e).attr("colspan",o).show()}}updateCell(t){t.hasOwnProperty("index")&&t.hasOwnProperty("field")&&t.hasOwnProperty("value")&&(this.data[t.index][t.field]=t.value,!1!==t.reinit&&(this.initSort(),this.initBody(!0)))}updateCellById(t){if(!t.hasOwnProperty("id")||!t.hasOwnProperty("field")||!t.hasOwnProperty("value"))return;(Array.isArray(t)?t:[t]).forEach(({id:t,field:i,value:s})=>{let e;-1!==(e=this.options.data.indexOf(this.getRowByUniqueId(t)))&&(this.data[e][i]=s)}),!1!==t.reinit&&(this.initSort(),this.initBody(!0))}getOptions(){return t.extend(!0,{},this.options)}getSelections(){return this.options.data.filter(t=>!0===t[this.header.stateField])}getAllSelections(){return this.options.data.filter(t=>t[this.header.stateField])}checkAll(){this.checkAll_(!0)}uncheckAll(){this.checkAll_(!1)}checkInvert(){const i=this.$selectItem.filter(":enabled");let s=i.filter(":checked");i.each((i,s)=>{t(s).prop("checked",!t(s).prop("checked"))}),this.updateRows(),this.updateSelected(),this.trigger("uncheck-some",s),s=this.getSelections(),this.trigger("check-some",s)}checkAll_(t){let i;t||(i=this.getSelections()),this.$selectAll.add(this.$selectAll_).prop("checked",t),this.$selectItem.filter(":enabled").prop("checked",t),this.updateRows(),t&&(i=this.getSelections()),this.trigger(t?"check-all":"uncheck-all",i)}check(t){this.check_(!0,t)}uncheck(t){this.check_(!1,t)}check_(t,i){const s=this.$selectItem.filter(`[data-index="${i}"]`),e=this.data[i];if(s.is(":radio")||this.options.singleSelect){for(let t of this.options.data)t[this.header.stateField]=!1;this.$selectItem.filter(":checked").not(s).prop("checked",!1)}e[this.header.stateField]=t,s.prop("checked",t),this.updateSelected(),this.trigger(t?"check":"uncheck",this.data[i],s)}checkBy(t){this.checkBy_(!0,t)}uncheckBy(t){this.checkBy_(!1,t)}checkBy_(t,i){if(!i.hasOwnProperty("field")||!i.hasOwnProperty("values"))return;const s=[];this.options.data.forEach((e,n)=>{if(!e.hasOwnProperty(i.field))return!1;if(i.values.includes(e[i.field])){const i=this.$selectItem.filter(":enabled").filter(o.sprintf('[data-index="%s"]',n)).prop("checked",t);e[this.header.stateField]=t,s.push(e),this.trigger(t?"check":"uncheck",e,i)}}),this.updateSelected(),this.trigger(t?"check-some":"uncheck-some",s)}destroy(){this.$el.insertBefore(this.$container),t(this.options.toolbar).insertBefore(this.$el),this.$container.next().remove(),this.$container.remove(),this.$el.html(this.$el_.html()).css("margin-top","0").attr("class",this.$el_.attr("class")||"")}showLoading(){this.$tableLoading.show()}hideLoading(){this.$tableLoading.hide()}togglePagination(){this.options.pagination=!this.options.pagination;const t=this.$toolbar.find('button[name="paginationSwitch"] i');this.options.pagination?t.attr("class",`${this.options.iconsPrefix} ${this.options.icons.paginationSwitchDown}`):t.attr("class",`${this.options.iconsPrefix} ${this.options.icons.paginationSwitchUp}`),this.updatePagination()}toggleFullscreen(){this.$el.closest(".bootstrap-table").toggleClass("fullscreen")}refresh(t){t&&t.url&&(this.options.url=t.url),t&&t.pageNumber&&(this.options.pageNumber=t.pageNumber),t&&t.pageSize&&(this.options.pageSize=t.pageSize),this.initServer(t&&t.silent,t&&t.query,t&&t.url),this.trigger("refresh",t)}resetWidth(){this.options.showHeader&&this.options.height&&this.fitHeader(),this.options.showFooter&&!this.options.cardView&&this.fitFooter()}showColumn(t){this.toggleColumn(this.fieldsColumnsIndex[t],!0,!0)}hideColumn(t){this.toggleColumn(this.fieldsColumnsIndex[t],!1,!0)}getHiddenColumns(){return this.columns.filter(({visible:t})=>!t)}getVisibleColumns(){return this.columns.filter(({visible:t})=>t)}toggleAllColumns(t){for(let i of this.columns)i.visible=t;if(this.initHeader(),this.initSearch(),this.initPagination(),this.initBody(),this.options.showColumns){const t=this.$toolbar.find(".keep-open input").prop("disabled",!1);t.filter(":checked").length<=this.options.minimumCountColumns&&t.filter(":checked").prop("disabled",!0)}}showAllColumns(){this.toggleAllColumns(!0)}hideAllColumns(){this.toggleAllColumns(!1)}filterBy(i){this.filterColumns=t.isEmptyObject(i)?{}:i,this.options.pageNumber=1,this.initSearch(),this.updatePagination()}scrollTo(t){if("string"==typeof t&&(t="bottom"===t?this.$tableBody[0].scrollHeight:0),"number"==typeof t&&this.$tableBody.scrollTop(t),void 0===t)return this.$tableBody.scrollTop()}getScrollPosition(){return this.scrollTo()}selectPage(t){t>0&&t<=this.options.totalPages&&(this.options.pageNumber=t,this.updatePagination())}prevPage(){this.options.pageNumber>1&&(this.options.pageNumber--,this.updatePagination())}nextPage(){this.options.pageNumber<this.options.totalPages&&(this.options.pageNumber++,this.updatePagination())}toggleView(){this.options.cardView=!this.options.cardView,this.initHeader();const t=this.$toolbar.find('button[name="toggle"] i');this.options.cardView?(t.removeClass(this.options.icons.toggleOff),t.addClass(this.options.icons.toggleOn)):(t.removeClass(this.options.icons.toggleOn),t.addClass(this.options.icons.toggleOff)),this.initBody(),this.trigger("toggle",this.options.cardView)}refreshOptions(i){o.compareObjects(this.options,i,!0)||(this.options=t.extend(this.options,i),this.trigger("refresh-options",this.options),this.destroy(),this.init())}resetSearch(t){const i=this.$toolbar.find(".search input");i.val(t||""),this.onSearch({currentTarget:i})}expandRow_(t,i){const s=this.$body.find(o.sprintf('> tr[data-index="%s"]',i));s.next().is("tr.detail-view")===!t&&s.find("> td > .detail-icon").click()}expandRow(t){this.expandRow_(!0,t)}collapseRow(t){this.expandRow_(!1,t)}expandAllRows(i){if(i){const t=this.$body.find(o.sprintf('> tr[data-index="%s"]',0));let i=null,s=!1,e=-1;if(t.next().is("tr.detail-view")?t.next().next().is("tr.detail-view")||(t.next().find(".detail-icon").click(),s=!0):(t.find("> td > .detail-icon").click(),s=!0),s)try{e=setInterval(()=>{(i=this.$body.find("tr.detail-view").last().find(".detail-icon")).length>0?i.click():clearInterval(e)},1)}catch(t){clearInterval(e)}}else{const i=this.$body.children();for(let s=0;s<i.length;s++)this.expandRow_(!0,t(i[s]).data("index"))}}collapseAllRows(i){if(i)this.expandRow_(!1,0);else{const i=this.$body.children();for(let s=0;s<i.length;s++)this.expandRow_(!1,t(i[s]).data("index"))}}updateFormatText(t,i){this.options[o.sprintf("format%s",t)]&&("string"==typeof i?this.options[o.sprintf("format%s",t)]=(()=>i):"function"==typeof i&&(this.options[o.sprintf("format%s",t)]=i)),this.initToolbar(),this.initPagination(),this.initBody()}}r.DEFAULTS=n,r.LOCALES=a,r.COLUMN_DEFAULTS=l,r.EVENTS={"all.bs.table":"onAll","click-cell.bs.table":"onClickCell","dbl-click-cell.bs.table":"onDblClickCell","click-row.bs.table":"onClickRow","dbl-click-row.bs.table":"onDblClickRow","sort.bs.table":"onSort","check.bs.table":"onCheck","uncheck.bs.table":"onUncheck","check-all.bs.table":"onCheckAll","uncheck-all.bs.table":"onUncheckAll","check-some.bs.table":"onCheckSome","uncheck-some.bs.table":"onUncheckSome","load-success.bs.table":"onLoadSuccess","load-error.bs.table":"onLoadError","column-switch.bs.table":"onColumnSwitch","page-change.bs.table":"onPageChange","search.bs.table":"onSearch","toggle.bs.table":"onToggle","pre-body.bs.table":"onPreBody","post-body.bs.table":"onPostBody","post-header.bs.table":"onPostHeader","expand-row.bs.table":"onExpandRow","collapse-row.bs.table":"onCollapseRow","refresh-options.bs.table":"onRefreshOptions","reset-view.bs.table":"onResetView","refresh.bs.table":"onRefresh","scroll-body.bs.table":"onScrollBody"};const h=["getOptions","getSelections","getAllSelections","getData","load","append","prepend","remove","removeAll","insertRow","updateRow","updateCell","updateByUniqueId","removeByUniqueId","getRowByUniqueId","showRow","hideRow","getHiddenRows","mergeCells","refreshColumnTitle","checkAll","uncheckAll","checkInvert","check","uncheck","checkBy","uncheckBy","refresh","resetView","resetWidth","destroy","showLoading","hideLoading","showColumn","hideColumn","getHiddenColumns","getVisibleColumns","showAllColumns","hideAllColumns","filterBy","scrollTo","getScrollPosition","selectPage","prevPage","nextPage","togglePagination","toggleView","refreshOptions","resetSearch","expandRow","collapseRow","expandAllRows","collapseAllRows","updateFormatText","updateCellById"];t.BootstrapTable=r,t.fn.bootstrapTable=function(i,...s){let e;return this.each((o,n)=>{let a=t(n).data("bootstrap.table");const l=t.extend({},r.DEFAULTS,t(n).data(),"object"==typeof i&&i);if("string"==typeof i){if(!h.includes(i))throw new Error("Unknown method: "+i);if(!a)return;e=a[i].apply(a,s),"destroy"===i&&t(n).removeData("bootstrap.table")}a||t(n).data("bootstrap.table",a=new t.BootstrapTable(n,l))}),void 0===e?this:e},t.fn.bootstrapTable.Constructor=r,t.fn.bootstrapTable.defaults=r.DEFAULTS,t.fn.bootstrapTable.columnDefaults=r.COLUMN_DEFAULTS,t.fn.bootstrapTable.locales=r.LOCALES,t.fn.bootstrapTable.methods=h,t.fn.bootstrapTable.utils=o,t(()=>{t('[data-toggle="table"]').bootstrapTable()})})(jQuery);